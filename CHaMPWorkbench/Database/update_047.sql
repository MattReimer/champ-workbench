UPDATE Metric_Definitions SET Threshold=0.0, YearIntroduced=2017, UpdatedOn='2017-09-21 20:12:27' WHERE MetricID=73;
UPDATE Metric_Definitions SET Threshold=0.0, IsActive=0, YearIntroduced=2017, UpdatedOn='2017-09-20 22:33:44' WHERE MetricID=4630;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4660;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4661;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4662;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4663;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4664;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4665;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4666;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4667;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4668;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4669;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4670;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4671;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4672;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4673;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4674;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4675;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4676;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4677;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4678;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4679;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4680;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4681;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4682;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4683;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4684;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4685;
UPDATE Metric_Definitions SET ModelID=10100, UpdatedOn='2017-09-08 18:29:26' WHERE MetricID=4686;
CREATE UNIQUE INDEX UX_Metric_Instances_VisitID ON Metric_Instances (BatchID ASC, VisitID ASC);
UPDATE Metric_Schemas SET MetricSchemaXMLFile='https://raw.githubusercontent.com/SouthForkResearch/CHaMP_Metrics/master/xml/FinalVisitMetrics.xml' WHERE SchemaID=5;
DROP VIEW vwMainVisitList;
CREATE VIEW vwMainVisitList AS SELECT W.WatershedID AS WatershedID, WatershedName, V.VisitID AS VisitID, VisitYear, SampleDate, HitchName, CrewName, PanelName, S.SiteID AS SiteID, SiteName, StreamName, Organization, QCVisit, CategoryName, VisitPhase, VisitStatus, P.ProgramID, P.Title AS ProgramName, HasStreamTempLogger, HasFishData, IsPrimary, Count(C.VisitID) AS ChannelUnits, ProtocolID FROM CHAMP_Watersheds AS W INNER JOIN CHaMP_Sites AS S ON W.WatershedID = S.WatershedID INNER JOIN CHaMP_Visits AS V ON S.SiteID = V.SiteID INNER JOIN LookupPrograms AS P ON V.ProgramID = P.ProgramID LEFT JOIN CHaMP_ChannelUnits AS C ON V.VisitID = C.VisitID GROUP BY W.WatershedID, WatershedName, V.VisitID, VisitYear, SampleDate, HitchName, CrewName, PanelName, S.SiteID, SiteName, StreamName, Organization, QCVisit, CategoryName, VisitPhase, VisitStatus, NULL, HasStreamTempLogger, HasFishData, IsPrimary, ProgramName, P.ProgramID;
INSERT INTO VersionChangeLog(ChangeLogID,DateCreated,Version,Description) VALUES(1339,'2017-09-27 16:25:50',47,'Added ProtocolID to vwMainVisitList');
UPDATE VersionInfo SET ValueInfo='47' WHERE rowid=3;
UPDATE VersionInfo SET ValueInfo='27 Sep 2017' WHERE rowid=4;
