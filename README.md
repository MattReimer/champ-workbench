# CHaMP Workbench

## Before you build don't forget:

1. Execute `RetrieveWorkbenchMasterDB.bat` to get a copy of the ZIP file for this project
2. Execute `DownloadCPPLibs.bat` to get rasterman and any other libs you might need.

## Report Transforms

All the reports get generated by applying an XSL transform to XML. The XSL files in this repo are built in [another repo](https://bitbucket.org/northarrowresearch/champ-xsl-reports). ***DO NOT EDIT THEM DIRECTLY***

### To update the XSL transforms:

1. Make changes to the `champ-xsl-reports` repo
2. Push your changes to `champ-xsl-reports`
3. Verify that the report is correct using the address like: <http://releases.northarrowresearch.com/reports/master/html/watershed.html> 
4. Run the batch file ()

## Setting up for development

1. Clone this repo.
2. Double click the `DownloadCPPLibs.bat` to get the latest libs including rasterman etc.
3. Make sure [Nuget](https://www.nuget.org/) is installed on your machine and download all nuget packages for workbench.
2. Double click the `RetrieveWorkbenchMasterDB.bat` to get a copy of the latest template DB.

You should be good to build. Contact us if you have problems.

## Build Checklist

### 1. If the DB Schema is changed:

1. Make sure the template workbench **Access DB has the right version**. 
2. Make sure the **Project-> settings version** matches from step 1.
3. Make sure the `RetrieveWorkbenchMasterDB.bat` contains the right **version** number.
4. **Zip** up the template workbench DB and make sure it gets uploaded to `s3://releases.northarrowresearch.com/CHaMPWorkbench/MasterDatabase/WorkbenchMaster_V##.zip`
5. **Run** `RetrieveWorkbenchMasterDB.bat`
6. *(optional)* Do a git commit with a message like "Upgrading DB to V29"

### 2. In all cases:

1. **Increment** the Assembly versions.
2. Do a **publish** and make sure the autobuild version is implemented correctly. Make sure the **install URL** is correct: `http://releases.northarrowresearch.com/CHaMPWorkbench/`
3. Do a **`git commit`**. Make sure to **TAG IT** with the version number from step 1.
4. **S3 sync** the publish folder to the correct bucket.

## License

[GNU General Public License](LICENSE)